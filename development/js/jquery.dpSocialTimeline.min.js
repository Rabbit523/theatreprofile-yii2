!function(a){function b(b,c){this.timeline=a(b),this.settings=a.extend({},a.fn.dpSocialTimeline.defaults,c);var d=this.settings.feeds,e=this.settings.custom;this.feeds=new Array,this.custom=new Array,this.social=new Array;var f;this.is_iOS=!1,f=navigator.platform,"iPad"!==f&&"iPhone"!==f&&"iPod"!==f||(this.is_iOS=!0),this.timeline_id="";for(x in this.settings.feeds){if(this.feeds[x+"_arr"]=d[x].data.split(","),"undefined"!=typeof d[x].limit)try{isNaN(d[x].limit)?this.feeds[x+"_limit"]=d[x].limit.split(","):this.feeds[x+"_limit"]=d[x].limit}catch(a){}"undefined"==typeof this.feeds[x+"_limit"]&&(this.feeds[x+"_limit"]=0),this.feeds[x+"_url"]=new Array,this.timeline_id+=this.feeds[x+"_arr"]}for(x in this.settings.custom)this.custom[x+"_url"]=new Array(e[x].url),this.custom[x+"_name"]=new Array(e[x].name),this.custom[x+"_icon"]=new Array(e[x].icon),this.custom[x+"_limit"]=e[x].limit,this.social.push({name:this.custom[x+"_name"],url:this.custom[x+"_url"],id:x,icon:this.custom[x+"_icon"],limit:this.custom[x+"_limit"]}),this.timeline_id+=this.custom[x+"_url"];this.totalFeeds=0,this.resizeTimer,this.nameFeeds=new Array,this.iconFeeds=new Array,this.limitFeeds=new Array,this.item=new Array,this.settings.itemWidthOrig=this.settings.itemWidth;var g=new String(window.document.location);switch(g.indexOf("https://")!=-1?this.prefix="https://":this.prefix="http://",this.settings.layoutMode){case"timeline":"undefined"==typeof a.Isotope?(this.settings.layoutMode="masonry",""!=this.settings.columnsItemWidth&&(this.settings.itemWidth=this.settings.columnsItemWidth)):(this.settings.layoutMode="spineAlign",""!=this.settings.timelineItemWidth&&(this.settings.itemWidth=this.settings.timelineItemWidth));break;case"columns":this.settings.layoutMode="masonry",""!=this.settings.columnsItemWidth&&(this.settings.itemWidth=this.settings.columnsItemWidth);break;case"one_column":this.settings.layoutMode="undefined"==typeof a.Isotope?"vertical":"straightDown",""!=this.settings.oneColumnItemWidth&&(this.settings.itemWidth=this.settings.oneColumnItemWidth)}this.lastLayout=this.settings.layoutMode,this.timeline.addClass(this.settings.skin),this.init()}b.prototype={init:function(){var b=this;if(this.feeds.twitter_arr){for(var c=0;c<this.feeds.twitter_arr.length;c++)this.feeds.twitter_url[c]=a.trim(this.feeds.twitter_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.twitter_arr,url:this.feeds.twitter_url,id:"twitter",icon:"",limit:this.feeds.twitter_limit})}if(this.feeds.twitter_hash_arr){for(var c=0;c<this.feeds.twitter_hash_arr.length;c++){var d=this.feeds.twitter_hash_arr[c].substr(this.feeds.twitter_hash_arr[c].lastIndexOf("=")+1),e=encodeURIComponent(d);this.feeds.twitter_hash_url[c]=a.trim(this.feeds.twitter_hash_arr[c].replace(d,e))+"&t="+(new Date).getTime()}this.social.push({name:this.feeds.twitter_hash_arr,url:this.feeds.twitter_hash_url,id:"twitter",icon:"",limit:this.feeds.twitter_hash_limit})}if(this.feeds.lastfm_tracks_arr){for(var c=0;c<this.feeds.lastfm_tracks_arr.length;c++)this.feeds.lastfm_tracks_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_tracks_arr[c])+"/recenttracks.rss";this.social.push({name:this.feeds.lastfm_tracks_arr,url:this.feeds.lastfm_tracks_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_tracks_limit})}if(this.feeds.lastfm_events_arr){for(var c=0;c<this.feeds.lastfm_events_arr.length;c++)this.feeds.lastfm_events_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_events_arr[c])+"/events.rss";this.social.push({name:this.feeds.lastfm_events_arr,url:this.feeds.lastfm_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_events_limit})}if(this.feeds.lastfm_loved_arr){for(var c=0;c<this.feeds.lastfm_loved_arr.length;c++)this.feeds.lastfm_loved_url[c]="http://ws.audioscrobbler.com/2.0/user/"+a.trim(this.feeds.lastfm_loved_arr[c])+"/lovedtracks.rss";this.social.push({name:this.feeds.lastfm_loved_arr,url:this.feeds.lastfm_loved_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_loved_limit})}if(this.feeds.lastfm_artist_events_arr){for(var c=0;c<this.feeds.lastfm_artist_events_arr.length;c++)this.feeds.lastfm_artist_events_url[c]="http://ws.audioscrobbler.com/1.0/artist/"+a.trim(this.feeds.lastfm_artist_events_arr[c])+"/events.rss";this.social.push({name:this.feeds.lastfm_artist_events_arr,url:this.feeds.lastfm_artist_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_artist_events_limit})}if(this.feeds.lastfm_journal_arr){for(var c=0;c<this.feeds.lastfm_journal_arr.length;c++)this.feeds.lastfm_journal_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_journal_arr[c])+"/journals.rss";this.social.push({name:this.feeds.lastfm_journal_arr,url:this.feeds.lastfm_journal_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_journal_limit})}if(this.feeds.google_arr){for(var c=0;c<this.feeds.google_arr.length;c++)this.feeds.google_url[c]=a.trim(this.feeds.google_arr[c]);this.social.push({name:this.feeds.google_arr,url:this.feeds.google_url,id:"google",icon:"",limit:this.feeds.google_limit})}if(this.feeds.instagram_arr){for(var c=0;c<this.feeds.instagram_arr.length;c++)this.feeds.instagram_url[c]=a.trim(this.feeds.instagram_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.instagram_arr,url:this.feeds.instagram_url,id:"instagram",icon:"",limit:this.feeds.instagram_limit})}if(this.feeds.instagram_hash_arr){for(var c=0;c<this.feeds.instagram_hash_arr.length;c++){var d=this.feeds.instagram_hash_arr[c].substr(this.feeds.instagram_hash_arr[c].lastIndexOf("=")+1),e=encodeURIComponent(d);this.feeds.instagram_hash_url[c]=a.trim(this.feeds.instagram_hash_arr[c].replace(d,e))+"&t="+(new Date).getTime()}this.social.push({name:this.feeds.instagram_hash_arr,url:this.feeds.instagram_hash_url,id:"instagram",icon:"",limit:this.feeds.instagram_hash_limit})}if(this.feeds.soundcloud_arr){for(var c=0;c<this.feeds.soundcloud_arr.length;c++)this.feeds.soundcloud_url[c]="http://picklemonkey.net/cloudflipper/cloudflipper.php?feed=https://soundcloud.com/"+a.trim(this.feeds.soundcloud_arr[c]);this.social.push({name:this.feeds.soundcloud_arr,url:this.feeds.soundcloud_url,id:"soundcloud",icon:"https://a-v2.sndcdn.com/assets/images/sc-icons/favicon-154f6af5.ico",limit:this.feeds.soundcloud_limit})}if(this.feeds.facebook_page_arr){for(var c=0;c<this.feeds.facebook_page_arr.length;c++)this.feeds.facebook_page_url[c]=a.trim(this.feeds.facebook_page_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.facebook_page_arr,url:this.feeds.facebook_page_url,id:"facebook",icon:"",limit:this.feeds.facebook_page_limit})}if(this.feeds.delicious_arr){for(var c=0;c<this.feeds.delicious_arr.length;c++)this.feeds.delicious_url[c]="http://feeds.delicious.com/v2/rss/"+a.trim(this.feeds.delicious_arr[c]);this.social.push({name:this.feeds.delicious_arr,url:this.feeds.delicious_url,id:"delicious",icon:"",limit:this.feeds.delicious_limit})}if(this.feeds.flickr_arr){for(var c=0;c<this.feeds.flickr_arr.length;c++)this.feeds.flickr_url[c]="http://api.flickr.com/services/feeds/photos_public.gne?id="+a.trim(this.feeds.flickr_arr[c])+"&format=rss_200";this.social.push({name:this.feeds.flickr_arr,url:this.feeds.flickr_url,id:"flickr",icon:"",limit:this.feeds.flickr_limit})}if(this.feeds.flickr_hash_arr){for(var c=0;c<this.feeds.flickr_hash_arr.length;c++)this.feeds.flickr_hash_url[c]="http://api.flickr.com/services/feeds/photos_public.gne?tags="+a.trim(this.feeds.flickr_hash_arr[c])+"&lang=es-us&format=rss_200";this.social.push({name:this.feeds.flickr_hash_arr,url:this.feeds.flickr_hash_url,id:"flickr",icon:"",limit:this.feeds.flickr_hash_limit})}if(this.feeds.tumblr_arr){for(var c=0;c<this.feeds.tumblr_arr.length;c++)this.feeds.tumblr_url[c]="http://"+a.trim(this.feeds.tumblr_arr[c])+".tumblr.com/rss";this.social.push({name:this.feeds.tumblr_arr,url:this.feeds.tumblr_url,id:"tumblr",icon:"",limit:this.feeds.tumblr_limit})}if(this.feeds.youtube_arr){for(var c=0;c<this.feeds.youtube_arr.length;c++)this.feeds.youtube_url[c]=a.trim(this.feeds.youtube_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.youtube_arr,url:this.feeds.youtube_url,id:"youtube",icon:"",limit:this.feeds.youtube_limit})}if(this.feeds.youtube_search_arr){for(var c=0;c<this.feeds.youtube_search_arr.length;c++)this.feeds.youtube_search_url[c]=a.trim(this.feeds.youtube_search_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.youtube_search_arr,url:this.feeds.youtube_search_url,id:"youtube",icon:"",limit:this.feeds.youtube_search_limit})}if(this.feeds.dribbble_arr){for(var c=0;c<this.feeds.dribbble_arr.length;c++)this.feeds.dribbble_url[c]="http://dribbble.com/"+a.trim(this.feeds.dribbble_arr[c])+"/shots.rss";this.social.push({name:this.feeds.dribbble_arr,url:this.feeds.dribbble_url,id:"dribbble",icon:"",limit:this.feeds.dribbble_limit})}if(this.feeds.digg_arr){for(var c=0;c<this.feeds.digg_arr.length;c++)this.feeds.digg_url[c]="http://digg.com/users/"+a.trim(this.feeds.digg_arr[c])+"/history.rss";this.social.push({name:this.feeds.digg_arr,url:this.feeds.digg_url,id:"digg",icon:"",limit:this.feeds.digg_limit})}if(this.feeds.pinterest_arr){for(var c=0;c<this.feeds.pinterest_arr.length;c++)this.feeds.pinterest_url[c]="http://www.pinterest.com/"+a.trim(this.feeds.pinterest_arr[c])+"/feed.rss";this.social.push({name:this.feeds.pinterest_arr,url:this.feeds.pinterest_url,id:"pinterest",icon:"",limit:this.feeds.pinterest_limit})}if(this.feeds.vimeo_arr){for(var c=0;c<this.feeds.vimeo_arr.length;c++)this.feeds.vimeo_url[c]="http://vimeo.com/"+a.trim(this.feeds.vimeo_arr[c])+"/videos/rss";this.social.push({name:this.feeds.vimeo_arr,url:this.feeds.vimeo_url,id:"vimeo",icon:"",limit:this.feeds.vimeo_limit})}this.timeline.addClass("dpSocialTimelineLoading"),this._parseFeeds(),a(window).bind("resize",function(){a(window).height()==b.lastWindowHeight&&a(window).width()==b.lastWindowWidth||(b.lastWindowHeight=a(window).height(),b.lastWindowWidth=a(window).width(),b._updateTimelineSize())});var f="https://platform.twitter.com/widgets.js";a.getScript(f)},_supports_html5_storage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},_createCookie:function(a,b,c){this._supports_html5_storage()&&(localStorage[a]=b)},_deleteCookie:function(a){this._supports_html5_storage()&&(localStorage[a]=null)},_getCookie:function(a){return this._supports_html5_storage()?localStorage[a]:null},_updateTimelineSize:function(){this.timeline.width()<480?(a("button",this.timeline).removeClass("active"),a(".dpSocialTimeline_layout",this.timeline).hide(),this.settings.showFilter&&1!=this.totalFeeds||a(".dpSocialTimeline_divider",this.timeline).hide(),a(".dpSocialTimeline_lineWrap",this.timeline).fadeOut("fast"),a(".dpSocialTimeline_item",this.timeline).css("width","99%"),a(".dpSocialTimeline",this.timeline).isotope({layoutMode:"undefined"==typeof a.Isotope?"vertical":"straightDown"}),a(".dpSocialTimeline_item.filtered",this.timeline).length?(a(".dpSocialTimeline_item.filtered:gt("+(this.settings.total-1)+")",this.timeline).css({opacity:0,scale:.001,display:"none"}),a(".dpSocialTimeline_item.filtered:lt("+this.settings.total+")",this.timeline).css({opacity:1,scale:1,display:"block"})):a(".dpSocialTimeline_item:gt("+(this.settings.total-1)+")",this.timeline).css({opacity:0,scale:.001,display:"none"})):a("button."+this.lastLayout,this.timeline).hasClass("active")&&this.lastLayout!=("undefined"==typeof a.Isotope?"vertical":"straightDown")||(this.settings.showLayout&&a(".dpSocialTimeline_layout",this.timeline).show(),a("button."+this.lastLayout,this.timeline).trigger("click"))},_addSocial:function(b,c){var d=this;""!=this.social[b].name?this._parseRSS(this.social[b].url[c],this.social[b].limit,c,function(e,f){function p(){d.social[b].url.length>=c+1&&d._addSocial(b,c+1),f==d.social[b].url.length-1&&(parseInt(b,10)==d.social.length-1?(d.settings.cache&&(d._createCookie("dpSocialTimeline_"+d.timeline_id,JSON.stringify(d.item),1),d._createCookie("dpSocialTimeline_NameFeeds_"+d.timeline_id,JSON.stringify(d.nameFeeds),1),d._createCookie("dpSocialTimeline_IconFeeds_"+d.timeline_id,JSON.stringify(d.iconFeeds),1),d._createCookie("dpSocialTimeline_LimitFeeds_"+d.timeline_id,JSON.stringify(d.limitFeeds),1),d._createCookie("dpSocialTimeline_TotalFeeds_"+d.timeline_id,JSON.stringify(d.totalFeeds),1),d._createCookie("dpSocialTimeline_Time"+d.timeline_id,Math.round(a.now()/1e3),1)),d._output()):d._addSocial(b+1,0))}var g=e.xmlString;if(!e)return p(),!1;if(d.nameFeeds[d.totalFeeds]=d.social[b].id,d.iconFeeds[d.totalFeeds]=d.social[b].icon,d.limitFeeds[d.totalFeeds]=d.social[b].limit,d.totalFeeds++,"undefined"!=typeof e.feed&&"undefined"!=typeof e.feed.entries&&(e.item=e.feed.entries),"undefined"==typeof e.item)return void p();for(var h=0;h<e.item.length;h++){if(e.item[h].name=d.social[b].id,e.item[h].icon=d.social[b].icon,e.item[h].limit=d.social[b].limit,"undefined"!=typeof e.item[h].publishedDate&&(e.item[h].pubDate=e.item[h].publishedDate),e.item[h].search_item=d.social[b].name[f],"undefined"!=typeof g){var i=a.parseXML(g),j=a(i),k=j.find("enclosure")[h],l=j.find("description")[h+1],m=j.find("guid")[h],n=j.find("credit")[h];j.find("thumbnail")[h];k&&(e.item[h].enclosure=a(k).attr("url"),e.item[h].enclosure_type=a(k).attr("type")),m&&(e.item[h].guid=a(m).text()),n&&"instagram"==d.social[b].id&&(e.item[h].author=a(n).text()),l&&"tumblr"==e.item[h].name&&(e.item[h].content=a(l).text())}e.item[h].feed_title=e.title,""!=e.item[h].author&&"Webstagram"!=e.item[h].author||(e.item[h].author=d.social[b].name[f]);try{""==e.item[h].title&&""==e.item[h].contentSnippet&&""==e.item[h].content&&""==e.item[h].thumbnail||d.item.push(e.item[h])}catch(a){}}p()},this.settings.total):parseInt(b,10)==this.social.length-1?(this.settings.cache&&(this._createCookie("dpSocialTimeline_"+this.timeline_id,JSON.stringify(this.item),1),this._createCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id,JSON.stringify(this.nameFeeds),1),this._createCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id,JSON.stringify(this.iconFeeds),1),this._createCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id,JSON.stringify(this.limitFeeds),1),this._createCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id,JSON.stringify(this.totalFeeds),1),this._createCookie("dpSocialTimeline_Time"+this.timeline_id,Math.round(a.now()/1e3),1)),this._output()):this._addSocial(b+1,0)},_parseFeeds:function(){if(!this.is_iOS&&this.settings.cache&&this._getCookie("dpSocialTimeline_"+this.timeline_id)&&""!=this._getCookie("dpSocialTimeline_"+this.timeline_id)&&"null"!=this._getCookie("dpSocialTimeline_"+this.timeline_id)){this.item=a.parseJSON(this._getCookie("dpSocialTimeline_"+this.timeline_id)),this.nameFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id)),this.iconFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id)),this.limitFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id)),this.totalFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id));new Date;this.settings.cacheTime<=Math.round(a.now()/1e3)-this._getCookie("dpSocialTimeline_Time"+this.timeline_id)&&(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._output()}else this.settings.cache||this.is_iOS||(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._addSocial(0,0)},_strip_tags:function(a,b){if(!a)return"";b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,d=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return a.replace(d,"").replace(c,function(a,c){return b.indexOf("<"+c.toLowerCase()+">")>-1?a:""})},_output:function(){var b=this,g={$dpSocialTimelineLine:"",$dpSocialTimelineFilter:"",$dpSocialTimelineLayout:"",$dpSocialTimelineLineWrap:"",$dpSocialTimelineContent:"",$div:"",showDivider:!1,appendFilter:!1,appendLayout:!1},q=new Array;if(g.$div=a("<div>").addClass("dpSocialTimeline"),g.$dpSocialTimelineLine=a("<div />").addClass("dpSocialTimeline_line"),g.$dpSocialTimelineLineWrap=a("<div />").addClass("dpSocialTimeline_lineWrap").append(a(g.$dpSocialTimelineLine)),a(g.$div).append(g.$dpSocialTimelineLineWrap),this.item.sort(function(a,b){return a=new Date(a.pubDate).getTime(),b=new Date(b.pubDate).getTime(),a==b?0:a>b?-1:1}),this._createMarkup(g,0,!1),a(".dpSocialTimeline_item",g.$div).width(this.settings.itemWidth),this.settings.showFilter&&this.totalFeeds>1){g.$dpSocialTimelineFilter=a("<div />").addClass("dpSocialTimeline_filter");for(var r=0;r<=this.totalFeeds;r++)"undefined"!=typeof this.nameFeeds[r]&&a.inArray(this.nameFeeds[r],q)===-1&&(g.$dpSocialTimelineFilter.append(a("<button />").attr({"data-filter":"."+this.nameFeeds[r]}).append(a("<span />").addClass("favicon "+this.nameFeeds[r]))),"undefined"!=typeof this.iconFeeds[r]&&""!=this.iconFeeds[r]&&a("."+this.nameFeeds[r],g.$dpSocialTimelineFilter).css("background-image","url("+this.iconFeeds[r]+")"),q[r]=this.nameFeeds[r]);q.length>1&&(g.appendFilter=!0,g.showDivider=!0)}g.$dpSocialTimelineLayout=a("<div />").addClass("dpSocialTimeline_layout"),this.settings.showLayoutTimeline&&"undefined"!=typeof a.Isotope&&g.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"spineAlign"}).addClass("spineAlign").append(a("<span />"))),this.settings.showLayoutColumns&&g.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"masonry"}).addClass("masonry").append(a("<span />"))),this.settings.showLayoutOneColumn&&g.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"undefined"==typeof a.Isotope?"vertical":"straightDown"}).addClass("straightDown").append(a("<span />"))),g.appendLayout=!0,this.settings.showLayout?g.showDivider=!0:g.$dpSocialTimelineLayout.hide(),b._onLoadHook(g),g.$dpSocialTimelineFilter.length&&a("button",g.$dpSocialTimelineFilter).click(function(){b.settings.allowMultipleFilters||a("button",g.$dpSocialTimelineFilter).not(this).removeClass("active"),a(this).hasClass("active")?a(this).removeClass("active"):a(this).addClass("active");var c="";return a(".dpSocialTimeline_item.filtered",g.$div).removeClass("filtered"),a("button.active",g.$dpSocialTimelineFilter).each(function(b){""!=a(this).attr("data-filter")&&"undefined"!=typeof a(this).attr("data-filter")&&(b>0&&(c+=","),c+=a(this).attr("data-filter"),a(".dpSocialTimeline_item"+a(this).attr("data-filter"),g.$div).addClass("filtered"))}),""==c?(c=".dpSocialTimeline_item:lt("+b.settings.total+")",g.$div.isotope({filter:c}),a(".dpSocialTimeline_item:gt("+(b.settings.total-1)+")",g.$div).css({opacity:0,scale:.001,display:"block"})):(c=".filtered:lt("+b.settings.total+")",g.$div.isotope({filter:c}),a(".dpSocialTimeline_item.filtered:gt("+(b.settings.total-1)+")",g.$div).css({opacity:0,scale:.001,display:"none"}),a(".dpSocialTimeline_item.filtered:lt("+b.settings.total+")",g.$div).css({opacity:1,scale:1,display:"block"})),!1}),a("button",g.$dpSocialTimelineLayout).click(function(){if(!a(this).hasClass("active")){if(a("button",g.$dpSocialTimelineLayout).removeClass("active"),a(this).addClass("active"),""!=a(this).attr("data-style")&&"undefined"!=typeof a(this).attr("data-style")){switch(b.lastLayout=a(this).attr("data-style"),b.lastLayout){case"spineAlign":g.$dpSocialTimelineLineWrap.fadeIn("fast"),""!=b.settings.timelineItemWidth?a(".dpSocialTimeline_item",g.$div).css("width",b.settings.timelineItemWidth):a(".dpSocialTimeline_item",g.$div).width(b.settings.itemWidthOrig);break;case"masonry":g.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=b.settings.columnsItemWidth?a(".dpSocialTimeline_item",g.$div).css("width",b.settings.columnsItemWidth):a(".dpSocialTimeline_item",g.$div).width(b.settings.itemWidthOrig);break;case"straightDown":case"vertical":g.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=b.settings.oneColumnItemWidth?a(".dpSocialTimeline_item",g.$div).css("width",b.settings.oneColumnItemWidth):a(".dpSocialTimeline_item",g.$div).width(b.settings.itemWidthOrig)}g.$div.isotope({layoutMode:a(this).attr("data-style")}),a(".dpSocialTimeline_item.filtered",g.$div).length?(a(".dpSocialTimeline_item.filtered:gt("+(b.settings.total-1)+")",g.$div).css({opacity:0,scale:.001,display:"none"}),a(".dpSocialTimeline_item.filtered:lt("+b.settings.total+")",g.$div).css({opacity:1,scale:1,display:"block"})):a(".dpSocialTimeline_item:gt("+(b.settings.total-1)+")",g.$div).css({opacity:0,scale:.001,display:"none"})}return!1}})},_createMarkup:function(b,c,d){var e=this;for(x=c;x<this.item.length;x++){this.settings.showSocialIcons?($favicon=a("<span />").addClass("favicon "+this.item[x].name),"undefined"!=typeof this.item[x].icon&&""!=this.item[x].icon&&a($favicon).css("background-image","url("+this.item[x].icon+")")):$favicon="",date_published=new Date(this.item[x].pubDate),published_parse=Date.UTC(date_published.getFullYear(),date_published.getMonth(),date_published.getDate(),date_published.getHours(),date_published.getMinutes()),$time=a("<span />").addClass("time").html(this._relativeTime(published_parse)),$permalink=a("<a />").addClass("permalink").attr({href:this.item[x].link,target:"_blank"}),"undefined"!=typeof this.item[x].link&&null!=this.item[x].link||(this.item[x].link=""),this.item[x].link.indexOf("youtube.com/watch")!==-1?(is_youtube=!0,this.item[x].thumbnail="http://i.ytimg.com/vi/"+this._getYoutubeId(this.item[x].link)+"/0.jpg",is_vimeo=!1,$video_icon=a("<div />").addClass("video_icon")):"http://vimeo.com"==this.item[x].link.substr(0,16)?(is_youtube=!1,is_vimeo=!0,$video_icon=a("<div />").addClass("video_icon")):(is_youtube=!1,is_vimeo=!1,$video_icon="");var f=this.item[x].author,g=this.item[x].feed_title,i=(this.item[x].enclosure,this.item[x].guid);"flickr"==this.item[x].name?f=this.item[x].author.content.match(/\((.*?)\)/g)[0]:"undefined"!=typeof f&&null!=f&&(f=f.replace(/\((.*?)\)/g,"")),"twitter"==this.item[x].name&&(f="@"+f),"google"==this.item[x].name&&(f=g.substr(0,g.indexOf(".")).replace("Public RSS-Feed of ","")),"soundcloud"==this.item[x].name&&(f=g),b.$dpSocialTimelineContent=a("<div />").addClass("dpSocialTimelineContent");var j="";if(this.item[x].link.indexOf("twitter.com")!==-1){var k=this.item[x].link.split("/"),l=k[5];j=this._linkify(this.item[x].title.replace(new RegExp("("+this.preg_quote(f.replace("@","")+": ")+")","gi"),"")),a(b.$dpSocialTimelineContent).append(a("<div>").addClass("dpSocialTimelineTwitterActions").append(a("<a>").attr({href:"https://twitter.com/intent/tweet?in_reply_to="+l}).addClass("tw_reply").text("Reply")).append(a("<a>").attr({href:"https://twitter.com/intent/retweet?tweet_id="+l}).addClass("tw_retweet").text("Retweet")).append(a("<a>").attr({href:"https://twitter.com/intent/favorite?tweet_id="+l}).addClass("tw_favorite").text("Like"))),"undefined"!=typeof j&&(j=j.replace(/nolinkVideo/g,"https://"))}else if(this.item[x].link.indexOf("facebook.com")!==-1||this.item[x].link.indexOf("pinterest.com")!==-1){if("undefined"!=typeof this.item[x].description&&(this.item[x].content=this.item[x].description),null!=this.item[x].content?this.item[x].content=this.item[x].content.replace('rel="nofollow">www','rel="nofollow">http://www'):this.item[x].content="&nbsp;",this.item[x].link.indexOf("media/set/")!==-1)continue;"undefined"!=(this.item[x].content,!1)&&this.item[x].link.indexOf("pinterest.com")===-1||(j=this._linkify(this._strip_tags(this.item[x].content,"<br>, <p>, <video>, <source>")).replace("<br><br>",""),0==j.indexOf("<br>")&&(j=j.substr(4))),""==j&&(j=this._linkify(this.item[x].title)),"undefined"==typeof j&&(j="&nbsp;"),j=j.replace('.jpg" target="_blank"','.jpg" style="display:none;"'),j=j.replace(/nolinkVideo/g,"https://")}else j=this._linkify(this.item[x].title);if("tumblr"==this.item[x].name&&("undefined"==(this.item[x].description,!1)&&(j=this._linkify(this._strip_tags(this.item[x].description,"<p>, <video>, <source>")).replace("<br><br>","")),this.item[x].description.indexOf("<iframe")!=-1&&(j=this.item[x].description)),"vimeo"==this.item[x].name&&(j=this.item[x].content.title),"modern"!=this.settings.skin&&a(b.$dpSocialTimelineContent).prepend(a("<div>").addClass("dpSocialTimelineText").html(j)),""!=this._getImage(this.item[x],!1)?($get_image=this._getImage(this.item[x],!1),$img_link=a("<a />").attr({href:this.item[x].link,target:"_blank"}).addClass("img_link"+(is_youtube||is_vimeo?" youtube":"")),a($img_link).append($get_image).append($video_icon),(this.settings.addColorbox||this.settings.addLightbox)&&"google"!=this.item[x].name&&(a($img_link).addClass("addColorbox"),is_youtube?a($img_link).attr({href:this.item[x].link.replace("&feature=youtube_gdata","")}):is_vimeo||a($img_link).attr({href:this._getImage(this.item[x],!0)})),b.$dpSocialTimelineContent.prepend($img_link),$get_image.attr("src").indexOf("graph.facebook.com")!==-1&&a.getJSON($get_image.attr("src")+"&redirect=false",function(b){$get_image.attr("src");b.data.is_silhouette&&a("img[src='"+this.url.replace("&redirect=false","")+"']").hide()})):a(b.$dpSocialTimelineContent).addClass("dpSocialTimeline_noImage"),"soundcloud"==this.item[x].name){var m=i.substr(i.lastIndexOf("/")+1);b.$dpSocialTimelineContent.addClass("track-"+m),a.getJSON("https://soundcloud.com/oembed?callback=?",{format:"js",url:i,iframe:!0,guid:".track-"+i.substr(i.lastIndexOf("/")+1)},function(c){var d=this.url.substr(this.url.lastIndexOf(".track")).split("&");"modern"==e.settings.skin?a(a(b.$div).find(d[0])[0]).prepend(c.html):a(a(b.$div).find(d[0])[0]).append(a("<br />")).append(a("<br />")).append(c.html),b.$div.isotope("reLayout")})}"modern"==this.settings.skin&&a(b.$dpSocialTimelineContent).append(a("<div>").addClass("dpSocialTimelineText").html(j)),"undefined"==typeof j&&(j=""),j=j.replace(/[\ud800-\udfff]/g,"");var n=jQuery("<a />").addClass("share_twitter").attr({href:"http://twitter.com/share?original_referer="+this.item[x].link+"&text="+encodeURIComponent(this._strip_tags(j).length>110?this._strip_tags(j).substr(0,110)+"... - ":this._strip_tags(j)),title:"Share in Twitter"}).click(function(a){var b=575,c=400,d=(jQuery(window).width()-b)/2,e=(jQuery(window).height()-c)/2,f=this.href,g="status=1,width="+b+",height="+c+",top="+e+",left="+d;return window.open(f,"twitter",g),!1}),o=jQuery("<a />").addClass("share_facebook").attr({href:"http://www.facebook.com/share.php?u="+this.item[x].link,title:"Share in Facebook"}).click(function(a){var b=575,c=400,d=(jQuery(window).width()-b)/2,e=(jQuery(window).height()-c)/2,f=this.href,g="status=1,width="+b+",height="+c+",top="+e+",left="+d;return window.open(f,"facebook",g),!1});"undefined"==typeof f&&"undefined"!=typeof this.item[x].search_item&&(f=this.item[x].search_item),"undefined"==typeof f&&(f="."),$stContentHead=a("<div />").addClass("dpSocialTimelineContentHead").append(a($favicon)).append(a("<span />").addClass("user").append(a("<strong/>").html(f).text())).append(a($permalink)).append(a("<div />").css("clear","both")),$stContentFoot=a("<div />").addClass("dpSocialTimelineContentFoot").append(a($time)).append(this.settings.share?a(n):"").append(this.settings.share?a(o):""),b.$dpSocialTimelineContent.append(a("<div />").css("clear","both")),$li=a("<div>").addClass((d?"dpSocialTimeline_hideMe ":"")+"dpSocialTimeline_item").addClass(this.item[x].name).append(a($stContentHead)).append(a(b.$dpSocialTimelineContent)).append(a($stContentFoot)).attr({"data-timeline-time":new Date(this.item[x].pubDate).getTime()}),a(b.$div).append($li)}},_onLoadHook:function(b){var c=this;a(c.timeline).append(a(b.$div).hide()),a("img",c.timeline).dpSocialTimeline_batchImageLoad({loadingCompleteCallback:function(){b.showDivider&&a(c.timeline).prepend(a("<div />").addClass("dpSocialTimeline_divider")),b.appendLayout&&a(c.timeline).prepend(b.$dpSocialTimelineLayout),b.appendFilter&&a(c.timeline).prepend(b.$dpSocialTimelineFilter),a(b.$div).show(),a(c.timeline).removeClass("dpSocialTimelineLoading"),"spineAlign"==c.settings.layoutMode&&a(b.$dpSocialTimelineLineWrap).show(),a(b.$div).isotope({itemSelector:".dpSocialTimeline_item",layoutMode:c.settings.layoutMode,itemPositionDataEnabled:!0,getSortData:{time:function(b){return a(b).attr("data-timeline-time")}},sortBy:"time",sortAscending:!1,spineAlign:{gutterWidth:20},transformsEnabled:!c.settings.rtl,onLayout:function(c,d){a(b.$dpSocialTimelineLayout).find("button[data-style='"+d.options.layoutMode+"']").addClass("active"),a("span",b.$dpSocialTimelineLine).fadeOut("fast",function(){a(this).remove()}),c.each(function(c){var d=a("<span />");b.$dpSocialTimelineLine.append(d.css({top:a(this).data("isotope-item-position").y+18}))})}}),a(b.$div).isotope({filter:".dpSocialTimeline_item:lt("+c.settings.total+")"}),a(".dpSocialTimeline_item:gt("+(c.settings.total-1)+")",b.$div).css({opacity:0,scale:.001}),a(".dpSocialTimeline_item",b.$div).width(c.settings.itemWidth),(c.settings.addColorbox||c.settings.addLightbox)&&(a(b.$div).find(".addColorbox:not(.youtube)").magnificPopup({type:"image"}),a(b.$div).find(".addColorbox.youtube").magnificPopup({type:"iframe"})),c._updateTimelineSize()}})},_parseRSS:function(b,c,d,e,f){if(null==b)return!1;var g=this.prefix+"query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%20%3D%20'"+encodeURIComponent(b)+"'&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";null!=c&&c>0&&"undefined"!=typeof c?g+="&num="+c:a.isArray(c)?g+="&num="+c[d]:null!=f&&(g+="&num="+f),b.indexOf("user_timeline.php")===-1&&b.indexOf("search.php")===-1&&b.indexOf("instagram.php")===-1&&b.indexOf("instagram_hash.php")===-1&&b.indexOf("foursquare.php")===-1&&b.indexOf("facebook_feed")===-1&&b.indexOf("youtube.php")===-1||(g=b,null!=c&&c>0&&"undefined"!=typeof c?g+="&count="+c:null!=f&&(g+="&count="+f)),a.getJSON(g,function(a){if("function"!=typeof e)return!1;if(b.indexOf("user_timeline.php")!==-1||b.indexOf("search.php")!==-1||b.indexOf("instagram.php")!==-1||b.indexOf("instagram_hash.php")!==-1||b.indexOf("foursquare.php")!==-1||b.indexOf("facebook_feed")!==-1||b.indexOf("youtube.php")!==-1)e.call(this,a.responseData,d);else{try{a.query.results.rss.channel}catch(a){return console.log("Feed: "+g+" could not be loaded"),e.call(this,!1,d),!1}e.call(this,a.query.results.rss.channel,d)}})},preg_quote:function(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")},_relativeTime:function(a){var b=a,c=arguments.length>1?arguments[1]:new Date,d=parseInt((Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes())-b)/1e3),e="";return e=d<60?"less than minute ago":d<120?"about a minute ago":d<3600?"about "+parseInt(d/60).toString()+" minutes ago":d<7200?"about an hour ago":d<86400?"about "+parseInt(d/3600).toString()+" hours ago":d<172800?"1 day ago":parseInt(d/86400).toString()+" days ago"},_getImage:function(b,c){var f,d=new Array,e=/<img .*?src=["\']([^ ^"^\']*)["\']/gi,g="",h=b.content,i=b.title;if("undefined"==typeof h&&(h=b.description),""!=b.thumbnail&&"undefined"!=typeof b.thumbnail)d[0]=b.thumbnail;else for(;f=e.exec(h);)d.push(f[1]);if("undefined"==typeof d[0]||null==d[0])return!1;if("object"==a.type(d[0])&&(d[0]=d[0].url),d.length>0&&d[0].indexOf("sndcdn.com")===-1){var j=d[0];if(j.indexOf("instagram.com/profiles")!==-1&&(j=d[1]),j=j.replace("_m.jpg",".jpg"),j.indexOf("fbcdn")==-1)j=j.replace("_b.jpg","_f.jpg"),j=j.replace("_b.png","_f.png");else if(j.indexOf("safe_image.php")==-1){
var k=j.split("_");object_id=k[1],j="https://graph.facebook.com/"+object_id+"/picture?type=normal"}if(j=j.replace("_s.jpg","_b.jpg"),j=j.replace("_m.png",".png"),j=j.replace("_s.png","_b.png"),j=j.replace("236x/","736x/"),j=j.replace(/\&amp;/g,"&"),j.indexOf("safe_image.php")!=-1&&(j=unescape(j.match(/url=([^&]+)/)[1])),j.indexOf("app_full_proxy.php")!=-1&&(j=unescape(j.match(/src=([^&]+)/)[1])),g=(""!=this.settings.itemWidth?this.settings.itemWidth:200)-40,"https://"==this.prefix){var l=j.replace("http://","https://");j=l}return c?j:a("<img />").attr({src:j,alt:i}).addClass("item_thumb").css({width:"98%"})}return!1},_checkImage:function(a){var b=new Image;b.onload=function(){return!0},b.onerror=function(){return!1},b.src=a},_getYoutubeVideo:function(a){return a.replace(/https:\/\/(www.)?(youtu.be\/|youtube.com\/watch\?v=)([a-zA-Z0-9?%.;:\\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\\/=+_-]*))/i,"http://www.youtube.com/v/$3?fs=1&amp;hl=en_US")},_getYoutubeId:function(a){var b=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,c=a.match(b);return!(!c||11!=c[1].length)&&c[1]},_getVimeoVideo:function(a){return a.replace(/http:\/\/(www.)?(vimeo.com\/)([a-zA-Z0-9?%.;:\\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\\/=+_-]*))/i,"http://player.vimeo.com/video/$3")},_linkify:function(b){if(b)return a.isArray(b)&&(b=b[0]),b.replace(/(\b((https?|ftp|file):\/\/|(www.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(a){return a.indexOf("://")===-1&&(a="http://"+a),'<a href="'+a+'" target="_blank">'+a+"</a>"})}},a.fn.dpSocialTimeline=function(c){var d;return this.each(function(){d=new b(a(this),c),a(this).data("dpSocialTimeline",d)}),this},a.fn.dpSocialTimeline.defaults={feeds:null,layoutMode:"timeline",addColorbox:!1,addLightbox:!1,showSocialIcons:!0,showFilter:!0,allowMultipleFilters:!0,showLayout:!0,showLayoutTimeline:!0,showLayoutColumns:!0,rtl:!1,cache:!1,cacheTime:900,showLayoutOneColumn:!0,itemWidth:200,share:!0,timelineItemWidth:"",columnsItemWidth:"",oneColumnItemWidth:"",skin:"light",total:10},a.fn.dpSocialTimeline.settings={},a.fn.dpSocialTimeline_batchImageLoad=function(b){var c=a(this),d=c.size(),e=d,f=0;a.fn.dpSocialTimeline_batchImageLoad.defaults={loadingCompleteCallback:null,imageLoadedCallback:null};var g=a.extend({},a.fn.dpSocialTimeline_batchImageLoad.defaults,b);c.each(function(){a(this)[0].complete?(e--,g.imageLoadedCallback&&g.imageLoadedCallback(f,d)):(a(this).load(function(){f++,g.imageLoadedCallback&&g.imageLoadedCallback(f,d),f>=e&&g.loadingCompleteCallback&&g.loadingCompleteCallback()}),a(this).error(function(){f++,g.imageLoadedCallback&&g.imageLoadedCallback(f,d),f>=e&&g.loadingCompleteCallback&&g.loadingCompleteCallback()}))}),e<=0&&g.loadingCompleteCallback&&g.loadingCompleteCallback()};try{a.Isotope.prototype._spineAlignReset=function(){this.spineAlign={colA:0,colB:10}},a.Isotope.prototype._spineAlignLayout=function(b){var c=this,d=this.spineAlign,e=Math.round(this.options.spineAlign&&this.options.spineAlign.gutterWidth)||0,f=Math.round(this.element.width()/2);b.each(function(){var b=a(this),g=d.colB>d.colA,h=g?f-(b.outerWidth(!0)+e/2):f+e/2,i=g?d.colA:d.colB;c._pushPosition(b,h,i),g?b.removeClass("colB").addClass("colA"):b.removeClass("colA").addClass("colB"),d[g?"colA":"colB"]+=b.outerHeight(!0)})},a.Isotope.prototype._spineAlignGetContainerSize=function(){var a={};return a.height=this.spineAlign[this.spineAlign.colB>this.spineAlign.colA?"colB":"colA"],a},a.Isotope.prototype._spineAlignResizeChanged=function(){return!0},a.Isotope.prototype._positionAbs=function(a,b){return{right:a,top:b}}}catch(a){}}(jQuery);